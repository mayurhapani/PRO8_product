<!DOCTYPE html>
<html lang="en">
  <%- include('./partials/head') %>

  <body>
    <%- include('./partials/header') %>

    <main class="flex flex-row">
      <%- include('./partials/aside') %>

      <div class="basis-9/12 bg-zinc-900 min-h-screen w-full p-10">
        <!-- Display flash messages -->
        <% if (messages.length > 0) { %> <% messages.forEach(message => { %> <% if (message
        ==='categoryAdded') { %>
        <p class="text-green-600 text-xl font-semibold py-5 ps-5 bg-green-200 mb-5 rounded-lg">
          New Category Added Successfully
        </p>
        <% } %> <% if (message ==='subCateAdded') { %>
        <p class="text-green-600 text-xl font-semibold py-5 ps-5 bg-green-200 mb-5 rounded-lg">
          New Sub Category Added Successfully
        </p>
        <% } %> <% if (message ==='CompanyAdded') { %>
        <p class="text-green-600 text-xl font-semibold py-5 ps-5 bg-green-200 mb-5 rounded-lg">
          New Company Added Successfully
        </p>
        <% } %><% if (message ==='productAdded') { %>
        <p class="text-green-600 text-xl font-semibold py-5 ps-5 bg-green-200 mb-5 rounded-lg">
          New Product Added Successfully
        </p>
        <% } %><% if (message ==='deleteProduct') { %>
        <p class="text-red-600 text-xl font-semibold py-5 ps-5 bg-red-200 mb-5 rounded-lg">
          Product Deleted Successfully
        </p>
        <% } %> <% if (message ==='editProduct') { %>
        <p class="text-blue-600 text-xl font-semibold py-5 ps-5 bg-blue-200 mb-5 rounded-lg">
          Product Edited Successfully
        </p>
        <% } %> <% if (message ==='userEdited') { %>
        <p class="text-blue-600 text-xl font-semibold py-5 ps-5 bg-blue-200 mb-5 rounded-lg">
          User Edited Successfully
        </p>
        <% } %> <% if (message ==='changePassword') { %>
        <p class="text-green-700 text-xl font-semibold py-5 ps-5 bg-green-300 mb-5 rounded-lg">
          User Password Changed Successfully
        </p>
        <% } %> <% if (message ==='deleteUser') { %>
        <p class="text-red-700 text-xl font-semibold py-5 ps-5 bg-red-300 mb-5 rounded-lg">
          User Deleted Successfully
        </p>
        <% } %> <% }) %> <% } %>

        <div class="flex justify-start items-center mb-10">
          <img
            class="inline-block h-20 w-20 rounded-full"
            src="data:image/jpeg;base64,<%= user.image.toString('base64') %>"
            alt="image"
          />
          <h2 class="text-white text-4xl font-bold ms-10">Hello, <%= user.name %> !</h2>
        </div>

        <div class="mt-20">
          <h3 class="text-zinc-400 text-xl mb-5">Your Posts</h3>

          <div class="postcontainer flex flex-wrap">
            <% myProducts.reverse( ).map(product=>{ %>
            <div class="product-container p-2 w-1/4">
              <div class="bg-zinc-300 p-4 rounded-xl">
                <div class="product-image-container h-64">
                  <img
                    class="product-image rounded-lg h-full w-full"
                    src="data:image/jpeg;base64,<%= product.image.toString('base64') %>"
                  />
                </div>

                <div class="product-name limit-text-to-2-lines mb-5">
                  <p class="font-semibold text-xl"><%= product.proname %></p>
                  <p class="text-sm"><%= product.disc %></p>
                </div>

                <div class="product-price flex justify-between items-center">
                  <div class="">
                    <span>Price : </span>
                    <span>$<%= product.price %></span>
                  </div>
                  <div class="">
                    <span>Discount : </span>
                    <span>$<%= product.discount %></span>
                  </div>
                </div>

                <div class="flex justify-between items-center">
                  <div class="">
                    <a
                      class="text-blue-500 font-bold me-5"
                      href="/product/editProduct/<%= product._id %>"
                      >Edit</a
                    >
                    <a
                      class="text-red-500 font-bold"
                      onclick="confirmBlogDelete(event)"
                      href="/product/deletePost/<%= product._id %>"
                      >delete</a
                    >
                  </div>
                </div>
              </div>
            </div>
            <% }) %>
          </div>
        </div>
      </div>
    </main>

    <script src="../public/javascripts/deleteBlog.js"></script>
  </body>
</html>
