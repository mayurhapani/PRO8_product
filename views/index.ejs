<!DOCTYPE html>
<html lang="en">
  <%- include('./partials/head') %>

  <body>
    <%- include('./partials/header') %>

    <header class="flex justify-end"></header>

    <div class="bg-zinc-900 min-h-screen w-full p-10">
      <div class="flex justify-start items-center mb-10">
        <img
          class="inline-block h-20 w-20 rounded-full"
          src="data:image/jpeg;base64,<%= user.image.toString('base64') %>"
          alt="image"
        />

        <h2 class="text-white text-4xl font-bold ms-10">Hello, <%= user.name %> !</h2>
      </div>

      <div class="mt-20">
        <h3 class="text-zinc-400 text-xl mb-5">All Products</h3>

        <div class="postcontainer">
          <% posts.reverse( ).map(post=>{ %>

          <div class="card border-2 border-zinc-600 rounded-md p-3 mb-2 bg-zinc-800 w-2/3">
            <img class="inline-block w-full h-80" src="<%= post.image %>" alt="img" />
            <div class="flex justify-between item-center mt-3">
              <h2 class="text-zinc-300 mb-1 text-xl">Title : <%= post.title %></h2>
              <h4 class="text-zinc-500 mb-1 text-sm">@ <%= post.user.name %></h4>
            </div>
            <p class="text-zinc-400 text-sm"><%= post.content %></p>
            <small class="text-white inline-block mt-5 mb-2"> <%= post.likes.length %> likes</small>
            <div class="flex justify-between items-center">
              <a class="text-blue-500 me-5" href="/likePost/<%= post._id %>">
                <%= post.likes.indexOf(user._id )===-1 ? "Like" : "Unlike" %>
              </a>
              <span class="text-zinc-400 inline-block"
                ><%= new Date(post.date).toLocaleString('en-US', { month: 'short', day: '2-digit',
                year: 'numeric', hour: '2-digit', minute: '2-digit' }) %></span
              >
            </div>
          </div>

          <% }) %>
        </div>
      </div>
    </div>
  </body>
</html>
